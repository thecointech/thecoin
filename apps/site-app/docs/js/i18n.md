# `i18n`

`react-intl` is a library to manage internationalization and pluralization support
for your react application. This involves multi-language support for both the static text but also things like variable numbers, words or names that change with application state. `react-intl` provides an incredible amount of mature facility to perform these very tasks.

The complete `react-intl` docs can be found here:

https://formatjs.io/docs/getting-started/installation

This is a two step process: 
 - Step 1: the ids and default messages and descriptions will be extracted 
    ```js
      yarn extract-intl
    ```
 - Step 2: the ids and default messages will be put in the json format we need 
    ```js
      yarn format-intl
    ```


## Usage

To be able to put translatable text and be picked up by the extract we need to put a formatMessage. There are two ways to do that:
  ```js
  intl.formatMessage(
    {
      description: 'A message', // Description should be a string literal
      defaultMessage: 'My name is {name}', // Message should be a string literal
    },
    {
      name: userName,
    } // Values should be an object literal, but not necessarily every value inside
  )
  ```
-------OR-------
  ```js
  import {FormattedMessage} from 'react-intl';
  <FormattedMessage
    description="A message" // Description should be a string literal
    defaultMessage="My name is {name}" // Message should be a string literal
  />
  ```
Documentation on that:
https://formatjs.io/docs/getting-started/message-declaration


## Extracting i18n JSON files

You can extract all ids and default texts from that application by running

```js
  yarn extract-intl
```

This will extract all id and default messages into a JSON files in `site/lang`. If there is no id a random one will be given. Please put ids
```json
{
  "app.homepage.wealthier.investment.link": {
    "defaultMessage": "Compare Us",
    "description": "Link"
  },
  "app.homepage.wealthier.investment.title": {
    "defaultMessage": "The Best Investment",
    "description": "Title"
  },
}
```


## Formatting into the right JSON files

The format used by the application is different form the one extracted by formatjs extract. It needs to be formatted by using:

```js
  yarn format-intl
```
The format we need:
```json
{
  "app.homepage.wealthier.investment.link": "Compare Us",
  "app.homepage.wealthier.investment.title": "The Best Investment"
}
```
If needed we can format into ast format: the only change needed is to add '--ast' to the 'format-intl' script line in the package.json.


## Removing i18n and react-intl

You can remove `react-intl` modules by first removing the `LanguageProvider` object from the `app/app.js` file and by either removing or not selecting the i18n text option during component scaffolding.

The packages associated with `react-intl` are:

- react-intl
